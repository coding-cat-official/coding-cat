#!/bin/bash

rm -f problems.js
touch problems.js

write() {
    echo "$@" >> problems.js
}

write "// THIS FILE IS AUTOGENERATED. DO NOT EDIT MANUALLY."
write ""

for f in * ; do
    [ ! -d "$f" ] && continue
    name="$(jq -r .meta.name "$f/problem.json")"
    write "import" "$name" "from './$f/problem.json';"
done

write "const problems = ["
for f in * ; do
    [ ! -d "$f" ] && continue
    name="$(jq -r .meta.name "$f/problem.json")"
    write "    $name,"
done
write "];"

write "export default problems;"

